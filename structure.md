# GeniusMed Vault医学科研专病库平台架构说明

## 系统概述

GeniusMed Vault是一个医学科研专病数据管理平台，旨在帮助医疗研究人员收集、管理、分析和可视化医学研究数据。系统支持多种数据集管理、统计分析、临床分析和数据可视化功能，为医学研究提供全方位支持。

## 系统分层架构

系统采用经典的MVC架构模式，分为以下几层：

### 1. 数据层
- 数据库：使用SQLite存储用户、数据集、数据条目等信息
- 模型定义：使用SQLAlchemy ORM框架定义数据模型
- 主要模型包括：User, DataSet, DatasetEntry, AnalysisProject等

### 2. 业务逻辑层
- 控制器：Flask路由处理用户请求
- 服务层：处理复杂业务逻辑，如数据分析、导入导出等
- 权限控制：基于角色的访问控制(RBAC)，分为管理员和医生角色

### 3. 表现层
- 前端视图：使用Flask模板引擎渲染HTML页面
- 前端交互：使用JavaScript实现动态交互
- 样式设计：使用Bootstrap框架和自定义CSS

## 模块依赖图

```
+----------------+      +----------------+      +----------------+
|  用户认证模块   | ---> |   数据集管理    | ---> |   数据分析模块   |
+----------------+      +----------------+      +----------------+
        |                      |                       |
        v                      v                       v
+----------------+      +----------------+      +----------------+
|  用户管理模块   | ---> |   数据录入模块   | ---> |  数据可视化模块  |
+----------------+      +----------------+      +----------------+
```

## 核心数据流图

1. 数据采集流程：
   用户 -> 创建数据集 -> 定义自定义字段 -> 录入数据 -> 存储到数据库

2. 数据分析流程：
   用户 -> 选择数据集 -> 选择分析方法 -> 执行分析 -> 展示结果 -> 导出报告

3. 项目管理流程：
   用户 -> 创建研究项目 -> 关联数据集 -> 邀请协作者 -> 共同研究

## 技术栈选择

### 后端
- Web框架：Flask
- ORM框架：SQLAlchemy
- 数据库：SQLite
- 数据处理：Pandas, NumPy

### 前端
- 基础框架：Bootstrap
- 交互处理：jQuery, Vanilla JS
- 图表可视化：Chart.js
- 表格处理：DataTables

### 部署
- 服务器：支持任何能运行Python的服务器
- 环境管理：使用venv虚拟环境
- 启动脚本：manage.sh

## 关键模块说明

### 1. 用户认证与授权模块
- 负责用户登录、注册、权限控制
- 实现基于角色的访问控制
- 管理用户配置文件和安全设置

### 2. 数据集管理模块
- 创建和管理数据集
- 定义自定义字段和数据结构
- 控制数据集访问权限和共享

### 3. 数据录入模块
- 根据数据集结构动态生成表单
- 支持数据批量导入导出
- 提供数据验证和清洗功能

### 4. 数据分析模块
- 提供统计分析工具（描述性统计、假设检验等）
- 支持临床分析（生存分析、风险评估等）
- 实现自定义分析流程

### 5. 数据可视化模块
- 生成各类统计图表
- 支持交互式数据探索
- 提供自动报告生成功能

## 扩展点与未来发展

1. 数据分析引擎：可扩展支持更多高级统计和机器学习算法
2. 插件系统：支持第三方插件扩展系统功能
3. API接口：提供完整的REST API供外部系统集成
4. 多中心协作：增强多中心研究的协作功能
5. 实时分析：支持实时数据流分析和监控

## 系统限制与约束

1. 性能限制：当前版本适合中小规模数据集分析
2. 安全考虑：敏感医疗数据需遵循相关法规进行保护
3. 扩展性：随着数据量增长，可能需要迁移到更强大的数据库系统 